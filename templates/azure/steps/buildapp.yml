parameters:
  appName: ''
  majorVer: ''
  minorVer: ''
  parchVer: ''

steps:
  - task: Bash@3
    displayName: 'Build Application Binary'
    inputs:
      targetType: 'inline'
      script: |
        set -e -x
        GITBRANCH=`echo "$(Build.SourceBranch)" | sed "s/refs\/heads\///"`
        make build APP_NAME=${{ parameters.appName }} GIT_BRANCH_NAME=$GITBRANCH MAJOR_VERSION=${{ parameters.majorVer }} MINOR_VERSION=${{ parameters.minorVer }} PATCH_VERSION=${{ parameters.patchVer }}
